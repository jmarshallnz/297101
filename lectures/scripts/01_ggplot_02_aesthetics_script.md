In this video we're going to be looking at the idea of aesthetics and the different geometries we can have in a ggplot 2 chart.

So aesthetics are where we set or map features of the plot to our data and most of the visual content or features of the plot are aesthetics. They're things like the position of points so we have the X and their Y coordinates, or things like the height of the of bars in a bar chart rwhich would be the y coordinate. It could be the color of points, in fact there are three different colours (inside colour of points, outside edge of points, and level of transparency). There's also the shape of the point or the size of the point and there's a bunch of others depending on the underlying geometry. Each of these can either be mapped to the data so that they vary based on the data, changing row by row, like the x and y coordinate of a scatterplot, or alternatively you can set them to make all the observations change in the same way such as making points a little bit transpraent, or changing their size. One of the key considerations is whether you're setting anesthetic to a single value where it applies across the board, or whether you're mapping it to a measure in your data to allow it to change from observation to observation and it's important to distinguish between those two ideas.

So for example take our scatter chart of flipper length versus body mass. We could change all the points from being black to being purple by setting the color aesthetic to be purple and we do so by specifying the color aesthetic. In this case we set it equal to purple but you could you can choose pink or yellow or whatever you like. The key is that we set the aesthetic inside the geom_point() function as we want it to apply to all the points.

Notice that we don't put the color equals purple inside the aes() bit, because that section is for mapping features of the data to features of the plot. If we do this, we clearly get a plot that's not purple, and instead get this handy little guide telling us that actually when you see red you should mean purple which is a bit strange. What's going on here is that ggplot thinks that we have a column called 'colour' that we've assigned the value 'purple' to for all observations. So it's treating this as a grouping variable and has coloured by group. As everything is in the "purple" group, all the observations are the same colour. It's used red as red is just the default colour for colouring by group!

So when setting an aesthetic to the same value for all observations we need to put it in the geometry layer.

If we instead want to map an aesthetic to a column of data, then aes() is the place for that. For example here I've mapped it to species so I'll get different colors for each species. As we want each point coloured by species, we put the colour specification into the aesthetic function and that gives you that handy guide.

So aesthetics are mapped via the aes() function and what that does is it actually just defines a one to one correspondence between features of the plot that's your x y and color and so on and measures of our data which will be your columns.

And that mapping then gets passed on to each geometry layer.

ggplot then automatically adds a scale or a guide to let you know which styling maps to which parts of your data. So for example X and Y automatically given axis scales, the color will be given a legend or color scale and so on.

So the thing to remember is anytime you want a feature of the plot to change based on your data it needs to be inside aes(). Anytime you want a feature of the plot to change external to your data so to change just to a single value for example, it needs to be in the geometry and not in the aes().

So we can change other things as well, so in this plot we've mapped the size aesthetic so how big the points are on the plot to species so that's why we've got large dots for Gentoo penguins and small dots for Adelies and medium dots for Chinstraps, and we've also set the alpha aesthetic which is transparency to be 0.5 so you can see that all the points are a little bit transparent so you can see through them and see ones that that are underneath for example.

Here's another example where we've mapped the shape of the point to the species so we've got circles triangles and squares, and then we've set the size to a specific value in this case 2. My advice on setting size is to play around so try 2, try 4, try 5, it somewhat depends on the on the size of the actual image in the end so you'll have to adapt a little bit when you specify the size. It has something to do with the default font size and resolution of the image.

So that's Aesthetics, what about geometries? So far we've just looked at the point geometry, but we can use something else and in fact there are many many different geometries. There are over 50 different geometries just included in ggplot2 by itself and there's a bunch more add-on packages that include other geometries as well.

At the moment we've used geom_point() but we could also plot the data using some other geometry such as for example geom_smooth(). So geom_smooth() fits a smooth trend to the data and shows that in place of the data. So it takes what it sees in the data and fits a statistical model through that, in this case it'll be a LOESS local linear smoother that's represented by the blue line. The gray band is some uncertainty in that average right. Because we're fitting an average to a specific set of data that data may not represent the whole population of penguins, it's just a sample of penguins that these good people have looked at, so the error bands, the uncertainty envelope if you like, is representing what we don't know necessarily about the population so we're trying to fit the population trend from some data so that's where that uncertainty band comes from. You can see that it summarizes the trend pretty well right it's going up, it's reasonably straight but maybe not perfectly straight.

We can always put more than one geometry layer on the plot. So here I've taken the scatter plot which is this bit here and I've added on the smoother so that I get both. I get the best of both worlds: I get what the summarised trend with the smoother, but also get the data as well, so I don't have to rely just on the summary. The data gives me a measure of the of the spread around that summary as well.

Notice that this is different to the uncertainty band: the uncertainty band is capturing the information we have about the average body mass in the population for a given flipper length. The points are showing us the range of body masses of individual penguins for that flipper length.

It's useful to have the rest of the the data and as you can see we've just followed the same recipe right we've specified ggplot added our data, mapped measures in our data to features of the plot and then specified more than one geometry.

So one thing to note is there are three separate ways to specify the aesthetics in ggplot. We've seen the first one which is using the aes() function on a separate line after the ggplot() line. The second is similar. The ggplot() function has a mapping argument to which you can assign the aes().

Each of the geometry layers also have the ability to specify the aes() via their mapping arguments. This can be used to override the mapping for a particular geometry. Let's see some examples.

So this first example is the same as we had earlier: the aes() is specified separately and is inherited by both the geometry layers (so those layers both use x and y).

The next example is where the mapping argument of ggplot() is set. Notice the aes() bit is all still there, it's just assigned to the mapping parameter of ggplot() instead of being added on separately. You'll find code on the web tends to use this one, but there's not a lot of reason to - the separate aes() line is less code and in my opinion clearer.

The third example utilises the mapping argument of the geometry layers. The same aes() is passed into both. This particular example isn't very useful in this case - it's more typing and more chance to make a mistake. For example if you wanted to change this code for a different dataset with different columns you'd have to change the data argument and the x and y arguments each in two spots, so more chance of an error.

The advantage of this third option is shown here. Here we want the points to be colored by species but we want the overall trend to be across species. We can do that by mapping x and y in the main aes() block which will apply to both the points and smoother, and then override the color argument in the geom_point so that we get the different different species. This is useful in this case because the trend by itself suggests that there's some fairly strong relationship between flipper length and body mass, but in fact we can see that this is largely driven by the different species. All of these these big ones are are Gentoo penguins and the small ones are a mix of Adelie and Chinstraps, so a lot of the increasing trend that we're inferring is down to the different species, and within species the trend may be less clear.

The key idea is that aesthetics are features of the plot, so the x and y coordinates, colors, shapes, size and so on. These can either be mapped so they change with your data, or set to a fixed value for all entries in your data. You can have more than one geometry in a plot and can map the aesthetics for each geometry layer separately.
